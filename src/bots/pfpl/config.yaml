# PFPL bot 基本設定
mode: bias
testnet: false               # true: testnet / false: mainnet
target_symbol: "ETH-PERP"
fair_feed: oraclePrices
spread_threshold: 0         # [%]

# シグナル閾値
threshold: 0.30
# abs(diff) が直近ヒストグラムの上位何%に入ったときだけ撃つ
threshold_pct_mode: percentile    # percentile / absolute
threshold_pct: 0.90               # 上位10%を撃つ（percentileモード時）
threshold_pct_window_sec: 900     # パーセンタイル算出に使う窓（秒）
threshold_pct_min_samples: 50     # サンプル不足ならpctフィルタはスキップ
# 目的: REJECTログで判明した asset_id=1 に対し、実運用の tick を明示し PRE-FLIGHT を発火させない
tick_override:
  "1":
    px: 0.05     # 仮置き。まずは 0.05 を推奨。REJECT が残る場合は 0.5 に変更して再試験
    qty: 0.0001  # 既存ログと同一の数量 tick を使用
cooldown_sec: 1.0          # 送信は最大1発/秒まで
max_order_per_sec: 1

# ポジション & サイズ管理
order_usd: 10               # 1注文あたりの名目USD
max_position_usd: 120.0  # 通常運用に復帰（再現用 4.0 を解除）
max_daily_orders: 1000      # 1日の注文上限。デイリーリセットまで有効
min_usd: 5                  # 取引所minSizeUsd未取得時のフォールバック


# 紙トレ手数料とスプレッド/スリッページ bps 設定
paper_fee_bps_taker: 2.5
paper_fee_bps_maker: 0.0
# bid/ask がこのbps以上に開いたら新規エントリーをスキップ
spread_threshold_bps: 2.5
paper_slip_bps: 0.5        # bid/ask から許容するIOCスリッページ。さらに引き締めても可 # 実弾では再調整
dry_run: true
log_level: "DEBUG"
bias_score_threshold: 1.0   # チャート用に閾値を下げて発火確率を上げる
taker_mode: true            # テイカー優先で約定率を上げる
heartbeat_sec: 30
funding_guard:
  enabled: false
  buffer_sec: 180
  reenter_sec: 120
